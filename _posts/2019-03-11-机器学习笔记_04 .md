---
title: 机器学习笔记_04
categories:
- ML
tags:
- tensorflow
updated: 2019-03-11
---



 

视频来源：中国慕课网 人工智能实践：tensorflow笔记_mnist手写数据识别

一、断点续训

 √关键处理：加入 ckpt 操作：

```python
ckpt = tf.train.get_checkpoint_state(MODEL_SAVE_PATH) 
if ckpt and ckpt.model_checkpoint_path: 
    saver.restore(sess, ckpt.model_checkpoint_path)
    
    # 再次运行的时候，程序会找到断点，继续训练
```

  1、注解：

 1）tf.train.get_checkpoint_state(checkpoint_dir,latest_filename=None) 

该函数表示如果断点文件夹中包含有效断点状态文件，则返回该文件。

 参数说明：

checkpoint_dir：表示存储断点文件的目录

 latest_filename=None：断点文件的可选名称，默认为“checkpoint”

 2）saver.restore(sess, ckpt.model_checkpoint_path) 

该函数表示恢复当前会话，将 ckpt 中的值赋给 w 和 b。

 参数说明：sess：表示当前会话，之前保存的结果将被加载入这个会话 ckpt.model_checkpoint_path：表示模型存储的位置，不需要提供模 型的名字，它会去查看 checkpoint 文件，看看最新的是谁，叫做什么。 

2、ckpt 代码位置： 

<img src="{{ site.url }}/assets//blog_images/ML/mnist数据集_01.png" />

3、实践代码验证 <img src="{{ site.url }}/assets//blog_images/ML/mnist数据集_02.png" />

**二、输入真实图片，输出预测结果**  

<img src="{{ site.url }}/assets//blog_images/ML/mnist数据集_03.png" />

**√网络输入：一维数组（784 个像素点）**  

<img src="{{ site.url }}/assets//blog_images/ML/mnist数据集_04.png" />

关键处理：

```python
def application():
 	testNum = input("input the number of test pictures:")
	 for i in range(testNum):
 		testPic = raw_input("the path of test picture:")
 		testPicArr = pre_pic(testPic)
 		preValue = restore_model(testPicArr)
 		print "The prediction number is:", preValue 
"""
注解：
任务分成两个函数完成
1）testPicArr = pre_pic(testPic)对手写数字图片做预处理
2）preValue = restore_model(testPicArr) 将符合神经网络输入要求的图片喂
给复现的神经网络模型，输出预测值
"""
```









































