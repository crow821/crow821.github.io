---
title: 机器学习笔记_11_图像基本知识
categories:
- ML
tags:
- tensorflow
updated: 2019-03-20
---



 

笔记来源：培训视频       tensorflow_图像基本知识



<img src="{{ site.url }}/assets//blog_images/ML/图像基本知识分析_01.png" />

图像基本操作：

目的：

​	1.增加图片数据的统一性

​	2.所有图片转换成指定大小

​	3.缩小图片数据量，防止增加开销

操作：

1.缩放图片大小

<img src="{{ site.url }}/assets//blog_images/ML/图像基本知识分析_02.png" />

图像读取：

<img src="{{ site.url }}/assets//blog_images/ML/图像基本知识分析_03.png" />

```python
# coding: utf-8
import tensorflow as tf
import os


def picread(filelist):
    """
    读取狗图片并转换为张量
    :param filelist: 文件路径+名字的列表
    :return: 每张图片的张量
    """
    # 1.构造文件队列
    file_queue = tf.train.string_input_producer(filelist)

    # 2.构造阅读器去读取图片内容（默认读取一张图片）
    reader = tf.WholeFileReader()
    key, value = reader.read(file_queue)
    print(value)
    # 3.对读取的图片数据进行解码
    image = tf.image.decode_jpeg(value)
    print(image)
    # 4.处理图片的大小（统一大小）
    image_resize = tf.image.resize_images(image, [200,200])
    print(image_resize)
    # 注意：一定要把样本的形状固定[200,200,3],在批处理的时候要求所有数据形状必须定义
    image_resize.set_shape([200,200,3])

    # 5.进行批处理
    image_batch = tf.train.batch([image_resize], batch_size=20, num_threads=1, capacity=20)
    print(image_batch)


    return  image_batch


if __name__ == "__main__":
    file_name = os.listdir("./test/dog_pic/")
    filelist = [os.path.join("./test/dog_pic/", file) for file in file_name]
    # print(file_name)
    image_batch = picread(filelist)
    # 开启会话运行结果
    with tf.Session() as sess:
        # 定义一个线程协调器
        coord = tf.train.Coordinator()

        # 开启读文件的线程
        threads = tf.train.start_queue_runners(sess, coord=coord)
        # 打印读取内容
        print(sess.run([image_batch]))

        # 回收子线程
        coord.request_stop()
        coord.join(threads)

```
